#include<stdio.h>
#include<stdlib.h>
#include<iostream>
//BP模式匹配识别
typedef struct String{
	struct String() :ch(NULL), length(0){};  //初始化
	char *ch;
	int length;
}String;
bool StrAssign(String &s, char*ch){
	int n = 0;
	if (s.ch)
		free(s.ch);
	while (ch[n]){ ++n; }//得到ch的长度
	s.ch = (char*)malloc(n *sizeof(char));
	if (!s.ch)
		exit(OVERFLOW);
	for (int i = 0; i < n; ++i)
		s.ch[i] = ch[i];
	s.length = n;  //字符串长度不包含结束符
	return true;
}
int Index_BP(String &s,String &t,int pos){
	int i = pos, j = 0;
	while (i < s.length&&j < t.length){
		if (s.ch[i] == t.ch[j]){
			++i;
			++j;
		}
		else{
			i = i - j + 1;
			j = 0;
		}
	}
	if (j==t.length)
		return i - t.length;
	else
		return 0;
}
int main(){
	String s, t; int pos = 2;
	char* ch1 = "helloworld", *ch2 = "world";
	StrAssign(s,ch1);
	StrAssign(t,ch2);
	printf("%d\n", Index_BP(s, t, 2));
	return 0;
}
